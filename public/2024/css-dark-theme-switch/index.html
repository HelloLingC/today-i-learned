<!DOCTYPE html>
<html>
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="A brief description of your website for SEO purposes.">
<meta name="keywords" content="moonlab, lingc">
<meta name="author" content="LingC">

<title>Moonlab - Today I Learned</title>

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">

<link rel="stylesheet" href="/css/main.css">
    </head>
    <body>
        <header>
            <h3 class="site-title">MoonLab - TIL </h3>

<p>This is where i store my today-i-learned</p>
<p>You may also wannna visit <a href="https://moonlab.top">my blog</a></p>

        </header>
        <main >

<article>
    <a href="/">Home</a>
    <h1>CSS 黑暗/日间主题切换</h1>

    <section><p>使用媒体查询prefers-color-scheme</p>
<pre tabindex="0"><code>@media (prefers-color-scheme: {mode}) {

}
</code></pre><pre tabindex="0"><code>:root {
  --color: #333;
  --bg-color: #eee;
}

@media (prefers-color-scheme: dark) {
  :root {
    --color: #ccc;
    --bg-color: #1f1f1f;
  }
}
</code></pre><p>如果要判断当前的主题，可以用：</p>
<pre tabindex="0"><code>const mediaQueryListDark = window.matchMedia(&#39;(prefers-color-scheme: dark)&#39;);
if (mediaQueryListDark.matches) {
  // 系统当前是暗色(dark)主题
}

const mediaQueryListLight = window.matchMedia(&#39;(prefers-color-scheme: light)&#39;);
if (mediaQueryListLight.matches) {
  // 系统当前是亮色(light)主题
}
</code></pre><p>有意思的是，甚至能监听系统主题的变动：</p>
<pre tabindex="0"><code>function handleChange (mediaQueryListEvent) {
  if (mediaQueryListEvent.matches) {
    // 用户切换到了暗色(dark)主题
  } else {
    // 用户切换到了亮色(light)主题
  }
}

const mediaQueryListDark = window.matchMedia(&#39;(prefers-color-scheme: dark)&#39;);

// 添加主题变动监控事件
mediaQueryListDark.addListener(handleChange);

// 移除主题变动监控事件
mediaQueryListDark.removeListener(handleChange);
</code></pre><h1 id="切换主题按钮">切换主题按钮</h1>
<p>如果要手动切换主题，最常用的就是改变根元素的classname。</p>
</section>

</article>


        </main>
        <footer>
            <p xmlns:cc="http://creativecommons.org/ns#" xmlns:dct="http://purl.org/dc/terms/"><span property="dct:title">All articles</span> by <a rel="cc:attributionURL dct:creator" property="cc:attributionName" href="https://moonlab.top">LingC</a> is licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/?ref=chooser-v1" target="_blank" rel="license noopener noreferrer" style="display:inline-block;">CC BY-NC-SA 4.0<img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/cc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/by.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/nc.svg?ref=chooser-v1" alt=""><img style="height:22px!important;margin-left:3px;vertical-align:text-bottom;" src="https://mirrors.creativecommons.org/presskit/icons/sa.svg?ref=chooser-v1" alt=""></a></p>

        </footer>
        
    </body>
</html>
